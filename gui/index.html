<!DOCTYPE HTML>
<html>
<body bgcolor="#ADD8E6">
  <head>
    <title>RangeRovr</title>
    <link rel="stylesheet" type="text/css" href="style.css"/>
		<meta charset="utf-8" />

		<script type="text/javascript" src="http://cdn.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
		<script type="text/javascript" src="http://cdn.robotwebtools.org/roslibjs/current/roslib.min.js"></script>

    <script type="text/javascript" type="text/javascript">
		  // Connecting to ROS
			// -----------------

			var ros = new ROSLIB.Ros({
				// url : 'ws://loggerhead.cs.washington.edu:9090'
 				url : 'ws://localhost:9090'
			});

		  ros.on('connection', function() {
  			console.log('Connected to websocket server.');
			});

		 		ros.on('error', function(error) {
  			console.log('Error connecting to websocket server: ', error);
			});

			ros.on('close', function() {
  			console.log('Connection to websocket server closed.');
			});

			// Subscribing to a Topic
			// ----------------------

			var stationLocationPublisher = new ROSLIB.Topic({
  			ros : ros,
  			name : '/choose_station',
  			messageType : 'std_msgs/Int8'
				});

	    window.onload = function() {
      	var stationButtons = document.getElementsByClassName("stationButton");

      	for (var i = 0; i < stationButtons.length; i++) {
        	stationButtons[i].addEventListener('click', function() {
          	toMainPage(this);
        	}, false);
      	}
      }

      var toMainPage = function(button) {
				var stationNum = button.getAttribute('value');
				var stationLocationMessage = new ROSLIB.Message({
					data: parseInt(stationNum)
				});
        for (var i = 0; i < 1; i++) 
					stationLocationPublisher.publish(stationLocationMessage);
				console.log(stationLocationPublisher);

        setTimeout(function() {
					location.href = "./main.html?station=" + stationNum + "&basket=1";
				}, 100);
      };
    </script>
  </head>
    
  <body>
    <div id="temp">
      <div>
        <font size = "10" face="verdana" color="black"><center>Select a station:</center></font>
      </div> 
      <center><button class="stationButton" type="button" value=1 location='(1, 2, 3)' style="width:200px;height:100px;background-color:#E0FFFF"><font size = "5">Station 1</font></button></center>
      <center><button class="stationButton" type="button" value=2 location='(4, 5, 6)' style="width:200px;height:100px;"><font size = "5">Station 2</font></button></center>
      <center><button class="stationButton" type="button" value=3 location='(7, 8, 9)' style="width:200px;height:100px;"><font size = "5">Station 3</font></button></center>
    </div>
  </body>
</html>
